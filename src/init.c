/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   init.c                                             :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: jthuy <jthuy@student.42.fr>                +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2020/09/23 13:48:48 by jthuy             #+#    #+#             */
/*   Updated: 2020/09/30 16:49:37 by jthuy            ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include "main.h"

t_sdl	*init_sdl()
{
	t_sdl	*sdl;
	
	if (SDL_Init(SDL_INIT_VIDEO))
		exit(0);
	sdl = (t_sdl *)malloc(sizeof(t_sdl));
	sdl->window = SDL_CreateWindow("DoomNukemTS", SDL_WINDOWPOS_UNDEFINED,
		SDL_WINDOWPOS_UNDEFINED, WIDTH, HEIGHT, SDL_WINDOW_SHOWN);
	sdl->surface = SDL_GetWindowSurface(sdl->window);
	return (sdl);
}

// t_map	*init_map()
// {
// 	t_map	*map;

// 	map = (t_map *)malloc(sizeof(t_map));
// 	// map->field =	"1..............2"\
// 	// 				"................"\
// 	// 				"................"\
// 	// 				"................"\
// 	// 				"................"\
// 	// 				"................"\
// 	// 				"................"\
// 	// 				".......P........"\
// 	// 				"................"\
// 	// 				"................"\
// 	// 				"................"\
// 	// 				"................"\
// 	// 				"................"\
// 	// 				"................"\
// 	// 				"................"\
// 	// 				"4..............3";
					
// 	// map->field =	"3..............2"\
// 	// 				"................"\
// 	// 				"................"\
// 	// 				"................"\
// 	// 				"................"\
// 	// 				"................"\
// 	// 				"................"\
// 	// 				".......P........"\
// 	// 				"................"\
// 	// 				"................"\
// 	// 				"................"\
// 	// 				"................"\
// 	// 				"................"\
// 	// 				"................"\
// 	// 				"................"\
// 	// 				"1..............4";

// 	// map->field =	"4..............3"\
// 	// 				"................"\
// 	// 				"................"\
// 	// 				"................"\
// 	// 				"................"\
// 	// 				"................"\
// 	// 				"................"\
// 	// 				".......P........"\
// 	// 				"................"\
// 	// 				"................"\
// 	// 				"................"\
// 	// 				"................"\
// 	// 				"................"\
// 	// 				"................"\
// 	// 				"................"\
// 	// 				"2..............1";

// 	map->field =	"................"\
// 					".1.............."\
// 					"................"\
// 					".............2.."\
// 					"................"\
// 					"................"\
// 					"................"\
// 					".......P........"\
// 					"................"\
// 					"................"\
// 					"................"\
// 					"................"\
// 					"...4............"\
// 					"................"\
// 					"..........3....."\
// 					"................";

// 	// map->field =	"................"\
// 	// 				"..1....2........"\
// 	// 				"................"\
// 	// 				"................"\
// 	// 				"................"\
// 	// 				".......3.....4.."\
// 	// 				"................"\
// 	// 				"................"\
// 	// 				"................"\
// 	// 				"...P............"\
// 	// 				"................"\
// 	// 				"................"\
// 	// 				"................"\
// 	// 				"..6..........5.."\
// 	// 				"................"\
// 	// 				"................";

// 	map->width = 16;
// 	map->height = 16;
// 	return (map);
// }

t_map	*init_map()
{
	static t_map	*map = NULL;
	static int		n = 0;

	if (!map)
		map = (t_map *)malloc(sizeof(t_map));
	if (!n)
	{
		map->field =	"................"\
						"................"\
						"..1.....2......."\
						"................"\
						"................"\
						"................"\
						"..4.....3......."\
						".......P........"\
						"................"\
						"................"\
						"................"\
						"................"\
						"................"\
						"................"\
						"................"\
						"................";
		
		// map->field =	"................"\
		// 				"................"\
		// 				"...1........2..."\
		// 				"................"\
		// 				"................"\
		// 				"................"\
		// 				"................"\
		// 				".......P........"\
		// 				"................"\
		// 				"................"\
		// 				"................"\
		// 				"................"\
		// 				"................"\
		// 				"................"\
		// 				"................"\
		// 				"................";
	}
	if (n == 1)
	{
		map->field =	"................"\
						"................"\
						"................"\
						"................"\
						"................"\
						"................"\
						"................"\
						".......P........"\
						"................"\
						"................"\
						"................"\
						"...........1...."\
						"................"\
						"................"\
						".........3...2.."\
						"................";
	}
	if (n == 2)
	{
		map->field =	"................"\
						"................"\
						"................"\
						"................"\
						"................"\
						"................"\
						"................"\
						".......P........"\
						"....1..........."\
						"..8...2........."\
						".7.....3........"\
						"..6...4........."\
						"....5..........."\
						"................"\
						"................"\
						"................";
	}
	
	
	n += 1;
	map->width = 16;
	map->height = 16;
	return (map);
}

t_player	*init_player(t_map *map)
{
	t_player	*player;
	int			i;

	player = (t_player *)malloc(sizeof(t_player));
	i = 0;
	while (map->field[i] != 'P')
		i += 1;
	player->index = i;
	player->crd[X] = i % map->width * SCALER; // USED SCALER
	player->crd[Y] = i / map->width * SCALER; // USED SCALER
	return (player);
}